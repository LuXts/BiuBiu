<hc:Window x:Class="BiuBiuWpfClient.MainWindow"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:hc="https://handyorg.github.io/handycontrol"
           xmlns:local="clr-namespace:BiuBiuWpfClient"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           Title="MainWindow"
           Width="975"
           Height="600"
           MinWidth="975"
           MinHeight="600"
           BorderThickness="0"
           CloseButtonForeground="AliceBlue"
           NonClientAreaBackground="#FF0076F6"
           OtherButtonForeground="AliceBlue"
           OtherButtonHoverBackground="#FF4B9EF8"
           OtherButtonHoverForeground="AliceBlue"
           ShowNonClientArea="False"
           ShowTitle="False"
           SizeChanged="Window_SizeChanged"
           WindowStyle="None"
           mc:Ignorable="d">
    <hc:Window.Resources>
        <Style x:Key="MyButtonGroup"
               BasedOn="{StaticResource ButtonGroupBaseStyle}"
               TargetType="hc:ButtonGroup">
            <Setter Property="hc:VisualElement.HighlightBorderBrush" Value="#D1D3D5" />
            <Setter Property="hc:VisualElement.HighlightBackground" Value="#D1D3D5" />
            <Setter Property="hc:VisualElement.HighlightForeground" Value="#FF00FF" />
        </Style>
        <Style x:Key="MainWindowCloseButton"
               BasedOn="{StaticResource ButtonBaseStyle}"
               TargetType="{x:Type Button}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="Red" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter Property="Background" Value="#0076F6" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="MainWindowOtherButton"
               BasedOn="{StaticResource ButtonBaseStyle}"
               TargetType="{x:Type Button}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#4B9EF8" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter Property="Background" Value="#0076F6" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ChatButton"
               BasedOn="{StaticResource ButtonBaseStyle}"
               TargetType="{x:Type Button}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#D7D9DB" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter Property="Background" Value="#EDEEEF" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </hc:Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"
                           MinHeight="40"
                           MaxHeight="40" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <hc:SimplePanel Grid.Row="0"
                        Height="40"
                        MinHeight="40"
                        MaxHeight="40"
                        hc:WindowAttach.IsDragElement="True"
                        Background="#FF0076F6"
                        MouseDown="Grid_MouseDown">
            <Button Width="40"
                    Height="40"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    hc:BorderElement.CornerRadius="0"
                    Click="CloseButton_OnClick"
                    Style="{StaticResource MainWindowCloseButton}">

                <Image Margin="5"
                       Source="Resources/Image/ic_close_ffffff.png"
                       Stretch="Fill" />
            </Button>

            <Button x:Name="MaxButton"
                    Width="40"
                    Height="40"
                    Margin="0,0,40,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    hc:BorderElement.CornerRadius="0"
                    Click="btnMaximize_Click"
                    Style="{StaticResource MainWindowOtherButton}">

                <Image Margin="5"
                       Source="Resources/Image/ic_crop_square_ffffff.png"
                       Stretch="Fill" />
            </Button>

            <Button x:Name="NormalButton"
                    Width="40"
                    Height="40"
                    Margin="0,0,40,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    hc:BorderElement.CornerRadius="0"
                    Click="btnNormal_Click"
                    Style="{StaticResource MainWindowOtherButton}"
                    Visibility="Collapsed">

                <Image Margin="5"
                       Source="Resources/Image/ic_Maximize_ffffff.png"
                       Stretch="Fill" />
            </Button>

            <Button Width="40"
                    Height="40"
                    Margin="0,0,80,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    hc:BorderElement.CornerRadius="0"
                    Click="MiniButton_OnClick"
                    Style="{StaticResource MainWindowOtherButton}">

                <Image Margin="5"
                       Source="Resources/Image/ic_minimize_ffffff.png"
                       Stretch="Fill" />
            </Button>
        </hc:SimplePanel>
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="65" />

                <ColumnDefinition MinWidth="215" MaxWidth="320" />
                <ColumnDefinition Width="Auto" />

                <ColumnDefinition MinWidth="650" />
            </Grid.ColumnDefinitions>

            <hc:SimplePanel Grid.Row="0"
                            Grid.Column="0"
                            Background="#FFFFFF">
                <hc:ButtonGroup Margin="2.5"
                                IsTabStop="False"
                                Orientation="Vertical"
                                Style="{StaticResource MyButtonGroup}">
                    <RadioButton Height="60"
                                 BorderThickness="0"
                                 IsChecked="True"
                                 IsTabStop="False">

                        <Image Margin="15"
                               Source="Resources/Image/ic_message_0076F6.png"
                               Stretch="Fill">
                            <hc:Poptip.Instance>
                                <hc:Poptip Content="聊天" PlacementType="TopLeft" />
                            </hc:Poptip.Instance>
                        </Image>
                    </RadioButton>
                    <RadioButton Height="60"
                                 BorderThickness="0"
                                 TabIndex="0">
                        <Image Margin="15"
                               Source="Resources/Image/ic_people_0076f6.png"
                               Stretch="Fill">
                            <hc:Poptip.Instance>
                                <hc:Poptip Content="通讯录" PlacementType="TopLeft" />
                            </hc:Poptip.Instance>
                        </Image>
                    </RadioButton>
                </hc:ButtonGroup>
                <Button Width="60"
                        Height="60"
                        Margin="2.5"
                        VerticalAlignment="Bottom"
                        BorderThickness="0">
                    <Image Margin="10"
                           Source="Resources/Image/ic_settings_0076f6.png"
                           Stretch="Fill">
                        <hc:Poptip.Instance>
                            <hc:Poptip Content="设置" PlacementType="TopLeft" />
                        </hc:Poptip.Instance>
                    </Image>
                </Button>
            </hc:SimplePanel>

            <hc:SimplePanel Grid.Column="1">
                <ListBox Name="ChatListBox"
                         Margin="5"
                         BorderThickness="0">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="0,5"
                                    BorderBrush="Black"
                                    BorderThickness="1">
                                <DockPanel LastChildFill="True">
                                    <Image Width="20"
                                           Height="20"
                                           Source="{Binding BImage}" />
                                    <TextBlock Margin="20,0,0,0"
                                               Foreground="Black"
                                               Text="{Binding LastMessageTimeString}" />
                                </DockPanel>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </hc:SimplePanel>

            <GridSplitter Grid.Row="0"
                          Grid.Column="2"
                          Width="2"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Stretch" />
            <Grid Name="ChatView"
                  Grid.Column="3"
                  Background="#EDEEEF"
                  ShowGridLines="False">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Name="RowDefinition" MinHeight="130" />
                </Grid.RowDefinitions>
                <GridSplitter Grid.Row="1"
                              Height="2"
                              Margin="10,0,10,0"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Center"
                              Background="#10000000" />
                <hc:SimplePanel Grid.Row="2">
                    <hc:SimplePanel Height="45"
                                    MinHeight="45"
                                    VerticalAlignment="Top">
                        <Button Width="35"
                                Height="35"
                                Margin="15,0,0,0"
                                Padding="6"
                                HorizontalAlignment="Left"
                                BorderThickness="0"
                                Style="{StaticResource ChatButton}">
                            <Image Margin="0" Source="Resources/Image/ic_image_848484.png" />
                        </Button>
                        <Button Width="35"
                                Height="35"
                                Margin="55,0,0,0"
                                Padding="7"
                                HorizontalAlignment="Left"
                                BorderThickness="0"
                                Style="{StaticResource ChatButton}">
                            <Image Margin="0" Source="Resources/Image/ic_insert_drive_file_848484.png" />
                        </Button>
                        <Button Width="35"
                                Height="35"
                                Margin="95,0,0,0"
                                Padding="5"
                                HorizontalAlignment="Left"
                                BorderThickness="0"
                                Style="{StaticResource ChatButton}">
                            <Image Margin="0" Source="Resources/Image/ic_videocam_848484.png" />
                        </Button>
                    </hc:SimplePanel>
                    <hc:TextBox Margin="10,40,10,50"
                                HorizontalContentAlignment="Left"
                                VerticalContentAlignment="Stretch"
                                AcceptsReturn="True"
                                Background="#0fff"
                                BorderThickness="0"
                                FontSize="16"
                                TextWrapping="Wrap" />
                    <hc:SimplePanel Height="50"
                                    MinHeight="50"
                                    VerticalAlignment="Bottom">
                        <Label Width="200"
                               Height="30"
                               Margin="0,0,80,10"
                               HorizontalAlignment="Right"
                               Background="#00FFFFFF"
                               BorderThickness="0"
                               Foreground="#999">
                            Ctrl+Enter 发送，Enter 换行
                        </Label>
                        <Button Width="70"
                                Height="30"
                                Margin="0,0,20,10"
                                HorizontalAlignment="Right"
                                FontSize="14"
                                Style="{StaticResource ButtonPrimary}">
                            发送
                        </Button>
                    </hc:SimplePanel>
                </hc:SimplePanel>
            </Grid>
        </Grid>
    </Grid>
</hc:Window>